(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{1012:function(n,e,t){"use strict";t.r(e);var a=t(4),l=t.n(a),a=t(31),F=t.n(a),a=t(46),S=t.n(a),D=t(0),M=t.n(D),R=t(595),T=(t(356),t(764)),z=t(781),A=t(779),a=t(8),P=t.n(a),Y=t(158),H=t(777),J=t(156),L=t(201),k=t(778),a=t(597),B=t.n(a),K=t(247),U=t(65),X=t(783);function r(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function C(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach(function(e){l()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}e.default=function(){var e=Object(D.useState)({employeeId:"",pageNumber:1,numberOfItems:20}),e=S()(e,2),n=e[0],l=e[1],e=Object(D.useState)({showMessage:!1,isError:!0,message:""}),e=S()(e,2),t=e[0],r=e[1],e=Object(Y.a)(),e=S()(e,4),a=e[0],o=e[1],i=e[2],m=e[3],e=Object(D.useState)(!1),e=S()(e,2),d=e[0],f=e[1],p=Object(U.c)(K.B),c=Object(D.useRef)(!1),b=Object(D.useRef)(o),e=Object(D.useState)(),e=S()(e,2),E=e[0],g=e[1],e=Object(D.useState)(0),e=S()(e,2),v=(e[0],e[1]),e=Object(D.useState)(!1),e=S()(e,2),O=e[0],y=e[1],e=(Object(D.useEffect)(function(){a.download_limit&&v(a.download_limit),a.data&&y(!0)},[a]),Object(D.useEffect)(function(){c.current&&(v(0),m(Object(k.bb)(n)),c.current=!1)},[n]),Object(Y.a)()),e=S()(e,5),j=e[0],s=e[1],w=(e[2],e[3]),e=(e[4],Object(D.useEffect)(function(){"object"==F()(j)&&d&&(B()(j,"EmployeeJobHistoryData.xls"),f(!1))},[j]),Object(D.useEffect)(function(){d&&(f(!1),r({showMessage:!0,isError:!0,message:"Unable to download please try later"}))},[s]),Object(D.useEffect)(function(){var e,t,a;(null==b?void 0:b.current)!==o&&r({showMessage:!0,isError:!0,message:(null==o||null===(e=o.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||(null==o||null===(a=o.response)||void 0===a?void 0:a.data)||(null==o?void 0:o.message)}),l(function(e){return C(C({},e),{},{pageNumber:1})}),b.current=o},[o]),Object(D.useEffect)(function(){"Failure"==(null==a?void 0:a.result)&&r({showMessage:!0,isError:!0,message:(null==a?void 0:a.message)||a}),l(function(e){return C(C({},e),{},{pageNumber:1})})},[a]),Object(Y.a)()),s=S()(e,4),u=s[0],e=(s[1],s[2]),h=s[3],s=Object(D.useState)([]),s=S()(s,2),N=s[0],_=s[1],s=Object(D.useState)(null),s=S()(s,2),x=s[0],I=s[1],s=(Object(D.useEffect)(function(){null!=u&&u.data&&_(u.data)},[u]),Object(D.useEffect)(function(){null!=n&&n.employeeId&&g("")},[n]),[{title:"Employee",dataIndex:"employee",render:function(e){return M.a.createElement("h2",null,M.a.createElement("div",null,null==e?void 0:e.full_name),M.a.createElement("span",null,null==e?void 0:e.user_id))}},{title:"Employment Level",dataIndex:"employment_level",render:function(e){return M.a.createElement("h2",null,p[e])}},{title:"Designation",dataIndex:["designation","value"],render:function(e,t){var a;return M.a.createElement("h2",null,M.a.createElement("div",null,e),M.a.createElement("span",null,null==t||null===(a=t.sub_company)||void 0===a?void 0:a.short_name))}},{title:"Facility",dataIndex:["location","facility_name"]},{title:"Department",dataIndex:["department","value"]},{title:"Reporting Head",dataIndex:"reporting_manager",render:function(e,t){var a,n;return M.a.createElement("h2",null,M.a.createElement("div",null,(null==t||null===(a=t.reporting_manager)||void 0===a?void 0:a.full_name)||"N/A"),M.a.createElement("span",null,(null==t||null===(n=t.reporting_manager)||void 0===n?void 0:n.user_id)||""))}},{title:"From Date",dataIndex:"effective_from",render:function(e){return M.a.createElement("div",null,e?P()(new Date(e)).format("Do MMM, YYYY"):"N/A")}},{title:"To Date",dataIndex:"effective_till",render:function(e){return M.a.createElement("div",null,e?P()(new Date(e)).format("Do MMM, YYYY"):"N/A")}}]);return M.a.createElement(M.a.Fragment,null,M.a.createElement("div",{className:"page-wrapper"},M.a.createElement(R.a,null,M.a.createElement("title",null,"Employee Reports"),M.a.createElement("meta",{name:"description",content:"Login page"})),M.a.createElement("div",{className:"content container-fluid"},t.showMessage?M.a.createElement(H.a,{message:t.message,dismiss:function(){r(function(e){return C(C({},e),{},{showMessage:!1})})},isError:t.isError}):null,M.a.createElement("div",{className:"page-header"},M.a.createElement("div",{className:"row align-items-center"},M.a.createElement(X.a,null),M.a.createElement("div",{className:"col-auto float-end ml-auto"},M.a.createElement("button",{className:"btn btn-primary submit-btn",onClick:function(){f(!0),w(Object(k.rb)(n))},disabled:!O},d?M.a.createElement("span",{className:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"}):M.a.createElement(M.a.Fragment,null,M.a.createElement("i",{className:"fa fa-plus"})," Download Excel"," "))))),M.a.createElement("div",{className:"row filter-row"},M.a.createElement("div",{className:"col-sm-6 col-md-5"},M.a.createElement("div",{className:"form-group"},M.a.createElement("label",{className:"date-label"},"Select Employee"),M.a.createElement(J.a,{className:"form-control floating",showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(e){var t;3<=e.length&&(t=e,clearTimeout(x),e=setTimeout(function(){_([]);var e={searchText:t};h(Object(k.lb)(e))},500),I(e))},placeholder:"Search Employee with ID,Name",type:"text",notFoundContent:e?M.a.createElement(L.a,{size:"small"}):u.data&&0===N.length?M.a.createElement("div",{className:"text-danger p-1 text-center"},"No data found"):null,value:null!=n&&n.employeeId?null==n?void 0:n.employeeId:null,onChange:function(t){y(!1),c.current=!0,l(function(e){return C(C({},e),{},{employeeId:t,pageNumber:1})})}},null==N?void 0:N.map(function(e,t){return M.a.createElement(J.a.Option,{key:t,value:e.user_id,style:{height:"42px",marginTop:"10px"}},e.full_name,"(",e.user_id,")")})),!!E&&M.a.createElement("small",{className:"text-danger ms-2"},"* ",E," "))),M.a.createElement("div",{className:"col-sm-3 col-md-2"},M.a.createElement("label",{className:"date-label"},"Â "),M.a.createElement("div",{className:"form-group form-focus"},M.a.createElement("a",{className:"btn btn-danger btn-block w-100 px-1 py-2",style:{minHeight:"0px"},type:"button",onClick:function(){c.current=!0,l(function(e){return C(C({},e),{},{employeeId:"",pageNumber:1})}),_([])}},"Reset"))),M.a.createElement("div",{className:"row"},M.a.createElement("div",{className:"col-md-12"},M.a.createElement("div",{className:"table-responsive"},i?M.a.createElement(A.a,null):M.a.createElement(T.a,{className:"table-striped",pagination:{total:null==a?void 0:a.total_no_of_objs,current:n.pageNumber,pageSize:n.numberOfItems,onChange:function(t,a){l(function(e){return C(C({},e),{},{pageNumber:a!=n.numberOfItems?1:t,numberOfItems:a})})},showTotal:function(e,t){return"Showing ".concat(t[0]," to ").concat(t[1]," of ").concat(e," records")},showSizeChanger:!0,itemRender:z.a,loading:i},style:{overflowX:"auto"},columns:s,dataSource:null==a?void 0:a.data,rowKey:function(e){return null==e?void 0:e.employee_job_id},scroll:"scroll"}))))))))}}}]);