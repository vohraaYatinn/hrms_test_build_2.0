(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{1009:function(e,t,n){"use strict";n.r(t),function(ue){var e=n(4),a=n.n(e),e=n(46),te=n.n(e),ne=n(0),ae=n.n(ne),de=n(595),e=(n(356),n(8)),le=n.n(e),re=n(158),me=n(778),pe=n(243),ve=n(764),fe=n(781),be=n(779),oe=n(247),ie=n(65),Ee=n(777),_e=n(785),ge=n(799),he=n(783),e=n(597),je=n.n(e),ye=n(792),Oe=n(797),we=n(784),ce=(n(788),n(156)),Ne=n(782),De=n(806);function l(t,e){var n,a=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)),a}function se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){a()(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}t.default=function(){function n(e,t){ue(e).modal(t)}function d(){var e={reportType:ye.l.ALL_EMPLOYEES_AS_ON_DATE};q(Object(Oe.c)(e)),n(ee,"show")}var m=Object(ie.c)(oe.v),p=Object(ie.c)(oe.K),v=Object(ie.c)(oe.B),f=Object(ie.c)(oe.C),e=Object(ne.useState)(le()(new Date)),e=te()(e,2),b=e[0],E=e[1],e=Object(ne.useState)({date:b?b.format("YYYY-MM-DD"):"",searchCompany:"",searchDepartment:"",facilityId:"",pageNumber:1,numberOfItems:20,directDownload:!1}),e=te()(e,2),a=e[0],l=e[1],e=Object(ne.useState)(0),e=te()(e,2),_=e[0],g=e[1],e=Object(ne.useState)({showMessage:!1,isError:!0,message:""}),e=te()(e,2),h=e[0],r=e[1],e=Object(ne.useState)([]),e=te()(e,2),j=e[0],y=e[1],e=Object(ne.useState)([]),e=te()(e,2),O=e[0],w=e[1],e=Object(ne.useState)(),e=te()(e,2),N=e[0],D=e[1],e=Object(ne.useState)([]),e=te()(e,2),S=e[0],I=e[1],e=Object(re.a)(),e=te()(e,4),t=e[0],x=e[3],e=Object(ne.useState)([]),e=te()(e,2),C=(e[0],e[1]),o=(Object(ne.useEffect)(function(){x(Object(_e.g)())},[]),Object(ne.useEffect)(function(){var e;a.searchCompany?null==t||null!==(e=t.result)&&void 0!==e&&e.map(function(e){(null==e?void 0:e.id)===parseInt(a.searchCompany)&&w(null==e?void 0:e.mapping_company_department)}):w([])},[a.searchCompany]),Object(ne.useEffect)(function(){null!=t&&t.result&&y(t.result||[])},[t]),Object(ne.useRef)(!0)),M=Object(ne.useRef)(!1),e=Object(re.a)(),e=te()(e,4),i=e[0],c=e[1],R=e[2],L=e[3],e=Object(re.a)(),e=te()(e,4),Y=e[0],s=e[1],P=e[2],A=e[3],e=Object(re.a)(),e=te()(e,4),F=e[0],u=e[1],k=e[2],T=e[3],e=Object(re.a)(),e=te()(e,4),z=e[0],J=e[1],K=e[2],q=e[3],e=Object(re.a)(),e=te()(e,5),H=e[0],V=(e[1],e[2],e[3],e[4],Object(ne.useRef)(i)),W=Object(ne.useRef)(c),X=Object(ne.useRef)(z),B=Object(ne.useRef)(s),G=Object(ne.useRef)(Y),Q=Object(ne.useRef)(F),U=Object(ne.useRef)(u),e=(Object(ne.useEffect)(function(){var e,t,n,a,l;V.current!=i&&("Failure"==(null==i?void 0:i.result)?r({showMessage:!0,isError:!0,message:(null==i?void 0:i.message)||i}):g(null==i?void 0:i.download_limit)),W.current!=c&&r({showMessage:!0,isError:!0,message:(null==c||null===(n=c.response)||void 0===n||null===(e=n.data)||void 0===e?void 0:e.detail)||(null==c||null===(t=c.response)||void 0===t?void 0:t.data)||(null==c?void 0:c.message)}),G.current!=Y&&r({showMessage:!0,isError:!1,message:null==Y?void 0:Y.message}),Q.current!=F&&(n=ye.i[ye.l.ALL_EMPLOYEES_AS_ON_DATE],je()(F,Object(we.h)(n.FILE_NAME,n.FILE_EXTENSION))),B.current!=s&&r({showMessage:!0,isError:!0,message:(null==s||null===(a=s.response)||void 0===a?void 0:a.data)||(null==s?void 0:s.message)}),U.current!=u&&r({showMessage:!0,isError:!0,message:(null==u||null===(l=u.response)||void 0===l?void 0:l.data)||(null==u?void 0:u.message)}),X.current!==z&&I(null==z?void 0:z.data),V.current=i,W.current=c,G.current=Y,B.current=s,X.current=z,Q.current=F,U.current=u},[i,c,Y,s,z,F,u]),Object(ne.useEffect)(function(){null!=H&&H.result&&C(H.result)},[H]),Object(ne.useState)(null)),e=te()(e,2),Z=(e[0],e[1],Object(ne.useEffect)(function(){o.current&&(null!=a&&a.date&&Z(),D("Date is required"),o.current=!1),M.current&&$(),null!=a&&a.date&&D("")},[a]),function(){g(0),L(Object(me.M)(a))}),$=function(){null!=a&&a.directDownload?T(Object(me.z)(a)):A(Object(me.qb)(a)),M.current=!1},e=[{title:"Employee",dataIndex:"full_name",render:function(e,t){var n,a;return ae.a.createElement("h2",null,0<(null==t?void 0:t.employee_transactions.length)?ae.a.createElement("div",null,ae.a.createElement("div",null,null==t||null===(n=t.employee_transactions[0])||void 0===n?void 0:n.full_name),ae.a.createElement("span",null,null==t||null===(a=t.employee_transactions[0])||void 0===a?void 0:a.user_id)):ae.a.createElement("div",null,ae.a.createElement("div",null,e),ae.a.createElement("span",null,null==t?void 0:t.user_id)))}},{title:"Employee ID",dataIndex:["employee_external_code","0","external_id"],render:function(e,t){var n;return ae.a.createElement("h2",null,ae.a.createElement("div",null,0<t.employee_external_code.length?null==t||null===(n=t.employee_external_code[0])||void 0===n?void 0:n.external_id:"N/A"))}},{title:"Designation",dataIndex:["active_job_details","0","designation","value"],render:function(e,t){var n,a,l,r,o,i;return ae.a.createElement("h2",null,ae.a.createElement("div",null,0<(null==t?void 0:t.job_transactions.length)?null==t||null===(n=t.job_transactions[0])||void 0===n||null===(a=n.designation)||void 0===a?void 0:a.value:e),ae.a.createElement("span",null,0<(null==t?void 0:t.job_transactions.length)?null==t||null===(l=t.job_transactions[0])||void 0===l||null===(r=l.sub_company)||void 0===r?void 0:r.short_name:null==t||null===(o=t.active_job_details[0])||void 0===o||null===(i=o.sub_company)||void 0===i?void 0:i.short_name))}},{title:"Work Location",dataIndex:["active_job_details","0","location","facility_id"],render:function(e,t){var n,a;return ae.a.createElement("h2",null,ae.a.createElement("div",null,0<(null==t?void 0:t.job_transactions.length)?null==t||null===(n=t.job_transactions[0])||void 0===n||null===(a=n.location)||void 0===a?void 0:a.facility_id:e))}},{title:"Roster Name",dataIndex:["employee_rosters","0","roster_pattern","roster_name"],render:function(e){return ae.a.createElement("h2",null,ae.a.createElement("div",null,e))}},{title:"Shift Off",dataIndex:["active_job_details","0","shift_off_type","display_name"],render:function(e){return ae.a.createElement("h2",null,ae.a.createElement("div",null,e))}},{title:"Joining Date",dataIndex:"joining_date",render:function(e,t){var n,a;return ae.a.createElement("div",null,0<(null==t?void 0:t.employee_transactions.length)?null!=t&&null!==(n=t.employee_transactions[0])&&void 0!==n&&n.joining_date?le()(new Date(null==t||null===(a=t.employee_transactions[0])||void 0===a?void 0:a.joining_date)).format("Do MMM, YYYY"):"N/A":e?le()(new Date(e)).format("Do MMM, YYYY"):"N/A")}},{title:"Employment Status",dataIndex:"employment_status",render:function(e,t){var n;return ae.a.createElement("h2",null,0<(null==t?void 0:t.employee_transactions.length)?f[null==t||null===(n=t.employee_transactions[0])||void 0===n?void 0:n.employment_status]:f[e])}},{title:"Employment Level",dataIndex:["active_job_details","0","employment_level"],render:function(e,t){var n;return ae.a.createElement("h2",null,0<(null==t?void 0:t.job_transactions.length)?v[null==t||null===(n=t.job_transactions[0])||void 0===n?void 0:n.employment_level]:v[e])}},{title:"Department",dataIndex:["active_job_details","0","department","value"],render:function(e,t){var n,a;return ae.a.createElement("h2",null,0<(null==t?void 0:t.job_transactions.length)?null==t||null===(n=t.job_transactions[0])||void 0===n||null===(a=n.department)||void 0===a?void 0:a.value:e)}},{title:"Reporting Head",dataIndex:"reporting_manager",render:function(e,t){var n,a,l,r,o,i;return ae.a.createElement("h2",null,ae.a.createElement("div",null,0<(null==t?void 0:t.job_transactions.length)?null==t||null===(n=t.job_transactions[0])||void 0===n||null===(a=n.reporting_manager)||void 0===a?void 0:a.full_name:null==t||null===(l=t.reporting_manager)||void 0===l?void 0:l.full_name),ae.a.createElement("span",null,0<(null==t?void 0:t.job_transactions.length)?null==t||null===(r=t.job_transactions[0])||void 0===r||null===(o=r.reporting_manager)||void 0===o?void 0:o.user_id:null==t||null===(i=t.reporting_manager)||void 0===i?void 0:i.user_id))}},{title:"State",dataIndex:["active_job_details","0","location","state"],render:function(e,t){var n,a,l,r,o,i;return ae.a.createElement("h2",null,0<(null==t?void 0:t.job_transactions.length)?ae.a.createElement("div",null,ae.a.createElement("div",null,m[null==t||null===(n=t.job_transactions[0])||void 0===n||null===(a=n.location)||void 0===a?void 0:a.city]),ae.a.createElement("span",null,p[null==t||null===(l=t.job_transactions[0])||void 0===l||null===(r=l.location)||void 0===r?void 0:r.state])):ae.a.createElement("div",null,ae.a.createElement("div",null,m[null==t||null===(o=t.active_job_details[0])||void 0===o||null===(i=o.location)||void 0===i?void 0:i.city]),ae.a.createElement("span",null,p[e])))}}],ee="#view_employee_list_as_of_date_reports";return ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("div",{className:"page-wrapper"},ae.a.createElement(de.a,null,ae.a.createElement("title",null,"Employee Reports"),ae.a.createElement("meta",{name:"description",content:"Login page"})),ae.a.createElement("div",{className:"content container-fluid"},h.showMessage?ae.a.createElement(Ee.a,{message:h.message,dismiss:function(){r(function(e){return se(se({},e),{},{showMessage:!1})})},isError:h.isError}):null,ae.a.createElement("div",{className:"page-header"},ae.a.createElement("div",{className:"row align-items-center"},ae.a.createElement(he.a,null))),ae.a.createElement("div",{className:"row filter-row"},ae.a.createElement("div",{className:"col-sm-6 col-md-3"},ae.a.createElement("div",{className:"form-group"},ae.a.createElement("label",{className:"date-label"},"Select Date",ae.a.createElement("span",{className:"text-danger"},"*")),ae.a.createElement(pe.a,{size:"large",className:"form-control floating",style:{height:"50px"},placeholder:"Select Date",disabledDate:function(e){return!e||e.isAfter(le()().add(1,"days"))},onKeyDown:function(e){return e.preventDefault()},value:b,onChange:function(e,t){o.current=!0,l(function(e){return se(se({},e),{},{date:t,pageNumber:1})}),E(e)}}),N&&ae.a.createElement("small",{className:"text-danger"},N))),ae.a.createElement("div",{className:"col-sm-6 col-md-3"},ae.a.createElement("div",{className:"form-group"},ae.a.createElement("label",{className:"date-label"},"Select Company"),ae.a.createElement(ce.a,{allowClear:!0,showSearch:!0,className:"form-control floating",type:"text",name:"companyId",placeholder:"Select Company",value:a.searchCompany||null,onChange:function(t){o.current=!0,l(function(e){return se(se({},e),{},{searchCompany:t,searchDepartment:""})}),t?j.map(function(e){(null==e?void 0:e.id)===t&&w(null==e?void 0:e.mapping_company_department)}):w([])},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},j.map(function(e){return ae.a.createElement(ce.a.Option,{key:e.id,value:e.id,label:e.short_name},e.short_name)})))),ae.a.createElement("div",{className:"col-sm-6 col-md-3"},ae.a.createElement("div",{className:"form-group"},ae.a.createElement("label",{className:"date-label"},"Select Departments"),ae.a.createElement(ce.a,{allowClear:!0,showSearch:!0,className:"form-control floating",name:"departmentId",placeholder:"Select Departments",disabled:0===O.length,value:0===O.length?[]:a.searchDepartment||null,onChange:function(t){o.current=!0,l(function(e){return se(se({},e),{},{searchDepartment:t})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},O.map(function(e){var t,n,a,l;return ae.a.createElement(ce.a.Option,{key:null==e||null===(t=e.mapping_department)||void 0===t?void 0:t.id,value:null==e||null===(n=e.mapping_department)||void 0===n?void 0:n.id,label:null==e||null===(a=e.mapping_department)||void 0===a?void 0:a.value},null==e||null===(l=e.mapping_department)||void 0===l?void 0:l.value)})))),ae.a.createElement("div",{className:"col-sm-6 col-md-3"},ae.a.createElement(De.a,{filter:a,setFilter:l,doFetchData:o,accessPermission:Ne.f.REGIONAL_EMPLOYEES_VIEW})),ae.a.createElement("div",{className:"col-sm-3 col-md-2"},ae.a.createElement("label",{className:"date-label"}," "),ae.a.createElement("div",{className:"form-group form-focus"},ae.a.createElement("a",{className:"btn btn-danger btn-block w-100 px-1 py-2",style:{minHeight:"0px"},type:"button",onClick:function(){o.current=!0,E(le()(new Date)),l(function(e){return se(se({},e),{},{date:le()(new Date).format("YYYY-MM-DD"),searchCompany:"",searchDepartment:"",facilityId:"",pageNumber:1})}),C([])}},"Reset")))),ae.a.createElement("div",{className:"row"},ae.a.createElement("div",{className:"col-md-12"},ae.a.createElement("div",{className:"table-responsive"},R?ae.a.createElement(be.a,null):ae.a.createElement(ve.a,{className:"table-striped",pagination:{total:null==i?void 0:i.total_no_of_objs,current:a.pageNumber,pageSize:a.numberOfItems,onChange:function(t,n){o.current=!0,l(function(e){return se(se({},e),{},{pageNumber:n!=a.numberOfItems?1:t,numberOfItems:n})})},showTotal:function(e,t){return"Showing ".concat(t[0]," to ").concat(t[1]," of ").concat(e," Employees")},showSizeChanger:!0,itemRender:fe.a,loading:R},style:{overflowX:"auto"},columns:e,dataSource:null==i?void 0:i.data,rowKey:function(e){return null==e?void 0:e.employee_id},scroll:"scroll",title:function(){return ae.a.createElement("div",{className:"row"},ae.a.createElement("div",{className:"col align-self-center py-2 py-sm-0"},ae.a.createElement("h4",{className:"mb-0"},"Employee List As On Date")),ae.a.createElement("div",{className:"col align-self-center py-2 py-sm-0"},ae.a.createElement("div",{className:"text-end"},ae.a.createElement("button",{className:"btn btn-primary btn-sm px-2 py-1 m-r-5",onClick:function(){d()},disabled:K},K?ae.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("i",{className:"fa-solid fa-file"})," View Reports")),ae.a.createElement("button",{className:"btn btn-warning btn-sm text-light px-2 py-1",onClick:function(){M.current=!0,l(function(e){return se(se({},e),{},{directDownload:_>=(null==i?void 0:i.total_no_of_objs)})})},disabled:!(null!=i&&i.total_no_of_objs)},P||k?ae.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):ae.a.createElement(ae.a.Fragment,null,ae.a.createElement("i",{className:"fa-solid fa-cloud-arrow-down"})," ","Download")))))}}))))),ae.a.createElement(ge.a,{modalId:"view_employee_list_as_of_date_reports",pendingReports:S,pendingReportFunction:d,pendingReportsLoading:K,pendingReportsError:J,closeModal:function(){return n(ee,"hide")}})))}}.call(this,n(246))}}]);