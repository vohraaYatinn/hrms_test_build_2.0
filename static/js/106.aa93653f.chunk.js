(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{1103:function(e,t,a){"use strict";a.r(t),function(ae){var e=a(4),n=a.n(e),e=a(54),H=a.n(e),V=a(0),X=a.n(V),ne=a(582),le=a(910),re=a(765),oe=a(230),q=a(152),ce=a(750),se=a(767),G=(a(766),a(234)),ie=a(763),ue=a(773),e=a(8),Q=a.n(e),me=a(235),Z=a(62),de=a(911),pe=a(779),fe=a(120),ve=a(772),be=a(912),$=a(776),ee=a(800),ge=a(770);function l(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function te(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){n()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}t.default=function(){function l(e,t,a){p(a),ae(e).modal(t)}var u=oe.a.RangePicker,m=(new Q.a).startOf("day"),e=Object(V.useState)({}),e=H()(e,2),d=e[0],p=e[1],n=Object(V.useRef)(!0),f="#add_attendance_lock",v="#view_attendance_unlock",b="#add_attendance_unlock",g="#delete_attendance_lock",E="#extend_attendance_lock",e=Object(G.a)(),e=H()(e,4),h=e[0],t=e[1],N=e[2],w=e[3],e=Object(G.a)(),e=H()(e,4),a=e[0],k=e[1],_=e[2],e=e[3],r=Object(G.a)(),r=H()(r,4),o=r[0],O=r[1],y=r[2],r=r[3],c=Object(G.a)(),c=H()(c,4),j=c[0],D=c[3],C=Object(Z.c)(fe.g),c=Object(Z.c)(me.I),I=Object(Z.c)(me.y),S=Object(Z.c)(me.K),s=Object(V.useState)([]),s=H()(s,2),L=s[0],x=s[1],s=Object(V.useState)([]),s=H()(s,2),M=s[0],P=s[1],s=Object(V.useState)({showMessage:!1,isError:!0,message:""}),s=H()(s,2),R=s[0],Y=s[1],A=Object(V.useRef)(o),F=Object(V.useRef)(a),z=Object(V.useRef)(t),K=Object(V.useRef)(j),s=(Object(V.useEffect)(function(){var e;z.current!==t&&Y({showMessage:!0,isError:!0,message:(null==t||null===(e=t.response)||void 0===e?void 0:e.data)||(null==t?void 0:t.message)}),A.current!==o&&(Y({showMessage:!0,isError:!1,message:null==o?void 0:o.message}),T()),F.current!==a&&(Y({showMessage:!0,isError:!1,message:null==a?void 0:a.message}),T()),K.current!=j&&x(null==j?void 0:j.result),z.current=t,A.current=o,K.current=j,F.current=a},[t,o,j,a]),Object(V.useState)([])),s=H()(s,2),W=s[0],B=s[1],s=Object(V.useState)({dateRange:[],companyId:"",stateId:"",departmentId:"",pageNumber:1,numberOfItems:20}),s=H()(s,2),i=s[0],J=s[1],s=(Object(V.useEffect)(function(){var e,t;null!=C&&C.job_details&&U(null==C||null===(e=C.job_details[0])||void 0===e||null===(t=e.sub_company)||void 0===t?void 0:t.id)},[C]),Object(V.useEffect)(function(){n.current&&T(),n.current=!1},[i]),[{title:"From Date",dataIndex:"from_date",render:function(e){return new Q.a(e).format("D MMM YYYY")}},{title:"To Date",dataIndex:"to_date",render:function(e){return new Q.a(e).format("D MMM YYYY")}},{title:"Lock At",dataIndex:"level",render:function(e,l){var t,a;return X.a.createElement("div",null,X.a.createElement("ul",{className:"ps-3"},X.a.createElement(X.a.Fragment,null,X.a.createElement("li",{className:"list-type-heading fw-bold"},"Companies"),null==l||null===(t=l.attendance_lock_territory_map)||void 0===t?void 0:t.map(function(e){var t;return null==e||null===(t=e.company)||void 0===t?void 0:t.short_name}).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){return X.a.createElement("li",{key:e},e)}),"company"!=(null==l?void 0:l.level)?X.a.createElement(X.a.Fragment,null,X.a.createElement("li",{className:"list-type-heading fw-bold"},pe.a[e]),null==l||null===(a=l.attendance_lock_territory_map)||void 0===a?void 0:a.map(function(e){return"employee"!=(null==l?void 0:l.level)?"state"==(null==l?void 0:l.level)?S[null==e?void 0:e.state]:null==e||null===(n=e.department)||void 0===n?void 0:n.value:(null==e||null===(t=e.employee)||void 0===t?void 0:t.full_name)+" ("+(null==e||null===(a=e.employee)||void 0===a?void 0:a.user_id)+")";var t,a,n}).filter(function(e,t,a){return a.indexOf(e)===t}).map(function(e){return X.a.createElement("li",{key:e},e)})):null)))}},{title:"Lock Status",dataIndex:"mode",render:function(e,t){return X.a.createElement(X.a.Fragment,null,X.a.createElement("div",null,"For Applying:"," ",X.a.createElement("i",{className:null!=t&&t.lock_for_applying?"fa-regular fa-dot-circle text-danger":"fa-regular fa-dot-circle text-success"}),X.a.createElement("span",{className:"ms-2"},null!=t&&t.lock_for_applying?"Locked":"Not locked")),X.a.createElement("div",{className:"mt-2"},"For Approving:"," ",X.a.createElement("i",{className:null!=t&&t.lock_for_approving?"fa-regular fa-dot-circle text-danger":"fa-regular fa-dot-circle text-success"}),X.a.createElement("span",{className:"ms-2"},null!=t&&t.lock_for_approving?"Locked":"Not locked")))}},{title:X.a.createElement("div",{className:"text-center"},"Actions"),dataIndex:"id",render:function(e,t){var a,n;return X.a.createElement("div",{className:"text-center"},X.a.createElement($.a,{scope:ee.a},X.a.createElement("button",{className:"btn btn-warning text-light btn-sm m-r-5",onClick:function(){return l(E,"show",t)},disabled:new Q.a(null==t?void 0:t.to_date).isBefore(m)},X.a.createElement("i",{className:"fa fa-plus m-r-5"})," Extend Lock Access Levels")),X.a.createElement($.a,{scope:ee.a},X.a.createElement("button",{className:"btn btn-success text-light btn-sm m-r-5",onClick:function(){return l(b,"show",t)},disabled:new Q.a(null==t?void 0:t.to_date).isBefore(m)},X.a.createElement("i",{className:"fa fa-lock-open m-r-5"})," Add Unlock")),X.a.createElement($.a,{scope:ee.ab},X.a.createElement("button",{className:"btn btn-primary text-light btn-sm m-r-5",onClick:function(){return l(v,"show",t)},disabled:0==(null==t||null===(a=t.attendance_lock_unlock_map)||void 0===a?void 0:a.length)},X.a.createElement("i",{className:"fa fa-eye m-r-5"})," View Unlocks (",null==t||null===(n=t.attendance_lock_unlock_map)||void 0===n?void 0:n.length,")")),X.a.createElement($.a,{scope:ee.a},X.a.createElement("button",{className:"btn btn-danger text-light btn-sm",onClick:function(){return l(g,"show",t)}},X.a.createElement("i",{className:"fa fa-trash m-r-5"})," Delete")))}}]),T=function(){w(Object(ue.I)(i))},U=function(e){e={group_company_id:e};D(Object(ve.g)(e))};return X.a.createElement("div",{className:"page-wrapper"},X.a.createElement(ne.a,null,X.a.createElement("title",null,"Lock Attendance"),X.a.createElement("meta",{name:"page title",content:"page title"})),X.a.createElement("div",{className:"content container-fluid"},R.showMessage?X.a.createElement(ie.a,{message:R.message,dismiss:function(){Y(function(e){return te(te({},e),{},{showMessage:!1})})},isError:R.isError}):null,X.a.createElement("div",{className:"page-header"},X.a.createElement("div",{className:"row align-items-center"},X.a.createElement(ge.a,null),X.a.createElement($.a,{scope:ee.a},X.a.createElement("div",{className:"col-auto float-end ml-auto"},X.a.createElement("button",{className:"btn btn-primary submit-btn",onClick:function(){return l(f,"show",{})}},X.a.createElement("i",{className:"fa fa-lock"})," Lock Attendance"))))),X.a.createElement($.a,{scope:ee.ab},X.a.createElement("div",{className:"row filter-row"},X.a.createElement("div",{className:"col-sm-12 col-md-3"},X.a.createElement("div",{className:"form-group"},X.a.createElement("label",{className:"date-label"},"Select Date Range"),X.a.createElement(u,{className:"form-control floating",size:"large",format:"YYYY-MM-DD",onKeyDown:function(e){return e.preventDefault()},value:W,onCalendarChange:function(e,t){n.current=!0,B(e),J(function(e){return te(te({},e),{},{dateRange:t,pageNumber:1})})}}))),X.a.createElement("div",{className:"col-sm-6 col-md-3"},X.a.createElement("div",{className:"form-group"},X.a.createElement("label",{className:"date-label"},"Select Company"),X.a.createElement(q.a,{allowClear:!0,showSearch:!0,className:"form-control floating",placeholder:"Select Company",value:i.companyId||null,onChange:function(t){n.current=!0,J(function(e){return te(te({},e),{},{companyId:t,pageNumber:1})}),t?null!=L&&L.map(function(e){(null==e?void 0:e.id)===t&&P(null==e?void 0:e.mapping_company_department)}):P([])},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().startsWith(e.toLowerCase())}},L.map(function(e){return X.a.createElement(q.a.Option,{key:null==e?void 0:e.id,value:null==e?void 0:e.id,label:null==e?void 0:e.short_name},null==e?void 0:e.short_name)})))),X.a.createElement("div",{className:"col-sm-6 col-md-3"},X.a.createElement("div",{className:"form-group"},X.a.createElement("label",{className:"date-label"},"Select Department"),X.a.createElement(q.a,{allowClear:!0,showSearch:!0,className:"form-control floating",placeholder:"Select Department",value:i.departmentId||null,onChange:function(t){n.current=!0,J(function(e){return te(te({},e),{},{departmentId:t,pageNumber:1})})},disabled:!(null!=M&&M.length),optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().startsWith(e.toLowerCase())}},M.map(function(e){var t,a,n,l;return X.a.createElement(q.a.Option,{key:null==e||null===(t=e.mapping_department)||void 0===t?void 0:t.id,value:null==e||null===(a=e.mapping_department)||void 0===a?void 0:a.id,label:null==e||null===(n=e.mapping_department)||void 0===n?void 0:n.value},null==e||null===(l=e.mapping_department)||void 0===l?void 0:l.value)})))),X.a.createElement("div",{className:"col-sm-6 col-md-3"},X.a.createElement("div",{className:"form-group"},X.a.createElement("label",{className:"date-label"},"Select State"),X.a.createElement(q.a,{allowClear:!0,showSearch:!0,className:"form-control floating",placeholder:"Select State",value:i.stateId||null,onChange:function(t){n.current=!0,J(function(e){return te(te({},e),{},{stateId:t,pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().startsWith(e.toLowerCase())}},c.map(function(e){return X.a.createElement(q.a.Option,{key:null==e?void 0:e.id,value:null==e?void 0:e.id,label:null==e?void 0:e.name},null==e?void 0:e.name)})))),X.a.createElement("div",{className:"col-sm-3 col-md-2"},X.a.createElement("label",{className:"date-label"},"Â "),X.a.createElement("div",{className:"form-group form-focus"},X.a.createElement("a",{className:"btn btn-danger btn-block w-100 px-1 py-2",style:{minHeight:"0px"},onClick:function(){n.current=!0,B([]),J(function(e){return te(te({},e),{},{dateRange:[],companyId:"",stateId:"",departmentId:"",pageNumber:1})})}},"Reset")))),X.a.createElement("div",{className:"row"},X.a.createElement("div",{className:"col-md-12"},X.a.createElement("div",{className:"table-responsive"},N?X.a.createElement(re.a,null):X.a.createElement(ce.a,{className:"table-striped",pagination:{total:null==h?void 0:h.totalCount,current:i.pageNumber,pageSize:i.numberOfItems,onChange:function(t,a){n.current=!0,J(function(e){return te(te({},e),{},{pageNumber:i.numberOfItems!=a?1:t,numberOfItems:a})})},showTotal:function(e,t){return"Showing ".concat(t[0]," to ").concat(t[1]," of ").concat(e," Locks")},showSizeChanger:!0,itemRender:se.a,loading:N},style:{overflowX:"auto"},columns:s,dataSource:null==h?void 0:h.result,rowKey:function(e){return null==e?void 0:e.id}})))))),X.a.createElement(le.a,{modalId:"add_attendance_lock",attendanceLockData:d,setAttendanceLockData:p,companies:L,states:c,departments:I,responseData:o,submitData:r,loading:y,error:O,closeModal:function(){return l(f,"hide")}}),X.a.createElement(le.a,{modalId:"add_attendance_unlock",attendanceLockData:d,setAttendanceLockData:p,companies:L,states:c,departments:I,responseData:o,submitData:r,loading:y,error:O,closeModal:function(){return l(b,"hide")}}),X.a.createElement(le.a,{modalId:"extend_attendance_lock",attendanceLockData:d,setAttendanceLockData:p,companies:L,states:c,departments:I,responseData:o,submitData:r,loading:y,error:O,closeModal:function(){return l(E,"hide")}}),X.a.createElement(de.a,{attendanceLock:d,statesObj:S,getLocksData:T,closeModal:function(){return l(v,"hide")}}),X.a.createElement(be.a,{id:null==d?void 0:d.id,responseData:a,submitData:e,loading:_,error:k,closeModal:function(){return l(g,"hide")}}))}}.call(this,a(233))}}]);