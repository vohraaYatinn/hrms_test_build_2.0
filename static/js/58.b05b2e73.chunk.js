(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{1128:function(e,t,a){"use strict";a.r(t),function(re){var e=a(4),n=a.n(e),e=a(54),X=a.n(e),oe=a(199),J=a(153),ce=a(190),ie=a(756),e=(a(586),a(8)),se=a.n(e),Z=a(0),$=a.n(Z),ue=a(584),ee=a(62),me=a(769),de=a(869),fe=a(771),te=a(777),ae=a(235),pe=a(155),ve=a(778),be=a(770),Ee=(a(783),a(236)),he=a(773),ne=a(858),ge=a(840),ye=a(794),Oe=a(1129);function l(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function le(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){n()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}t.default=function(){function u(e,t){re(e).modal(t)}function m(){A(Object(ge.d)(a))}var d=Object.keys(Object(ee.c)(pe.h)||{}),t=Object(ee.c)(pe.h),e=Object(Z.useState)({searchFrom:"my_uploads",searchType:"",searchStatus:"",searchField:"",searchReportingManager:"",searchCompany:"",searchDepartment:"",searchDesignation:"",searchFacility:"",searchState:"",searchCity:"",pageNumber:1,numberOfItems:20}),e=X()(e,2),a=e[0],n=e[1],e=Object(Z.useState)({showMessage:!1,isError:!0,message:""}),e=X()(e,2),f=e[0],p=e[1],e=Object(Z.useState)("my_uploads"),e=X()(e,2),v=e[0],b=e[1],e=Object(Z.useState)([]),e=X()(e,2),E=e[0],l=e[1],e=Object(Z.useState)([]),e=X()(e,2),h=e[0],g=e[1],e=Object(Z.useState)(!0),e=X()(e,2),y=e[0],O=e[1],e=Object(Z.useState)([]),e=X()(e,2),N=e[0],_=e[1],e=Object(Z.useState)([]),e=X()(e,2),w=e[0],S=e[1],e=Object(Z.useState)([]),e=X()(e,2),j=e[0],C=e[1],e=Object(Z.useState)([]),e=X()(e,2),D=(e[0],e[1]),e=Object(Z.useState)([]),e=X()(e,2),R=e[0],L=e[1],e=Object(Z.useState)([]),e=X()(e,2),P=e[0],x=e[1],T=Object(ee.c)(Ee.K),F=Object(ee.c)(Ee.I),I=Object(ee.c)(Ee.w),e=Object(ae.a)(),e=X()(e,4),U=e[0],k=e[2],A=e[3],e=Object(ae.a)(),e=X()(e,4),r=e[0],M=e[3],e=Object(ae.a)(),e=X()(e,4),o=e[0],q=e[2],B=e[3],e=Object(ae.a)(),e=X()(e,4),c=e[0],K=e[2],W=e[3],e=Object(ae.a)(),e=X()(e,4),G=e[0],e=(e[2],e[3],Object(ae.a)()),e=X()(e,5),i=e[0],Y=e[1],z=e[2],V=e[3],e=e[4],H="#bulk_upload",s=(Object(Z.useEffect)(function(){d.includes(te.f.REGIONAL_BULK_UPLOAD_VIEW)&&(M(Object(ve.g)()),"1"==t[te.f.REGIONAL_BULK_UPLOAD_VIEW].access_level?x(F):"2"==t[te.f.REGIONAL_BULK_UPLOAD_VIEW].access_level&&x(F.filter(function(e){return t[te.f.REGIONAL_BULK_UPLOAD_VIEW].territories.includes(e.id)})))},[]),Object(Z.useRef)(!0)),Q=(Object(Z.useEffect)(function(){1==s.current&&(m(),s.current)},[a]),Object(Z.useEffect)(function(){"Success"==(null==i?void 0:i.result)&&(m(),p({showMessage:!0,isError:!1,message:null==i?void 0:i.message}))},[i]),Object(Z.useEffect)(function(){null!=r&&r.result&&_(r.result||[])},[r]),Object(Z.useEffect)(function(){var e;a.searchCompany?null==r||null!==(e=r.result)&&void 0!==e&&e.map(function(e){(null==e?void 0:e.id)===parseInt(a.searchCompany)&&S(null==e?void 0:e.mapping_company_department)}):S([])},[a.searchCompany]),Object(Z.useEffect)(function(){null!=o&&o.data&&l(o.data)},[o]),Object(Z.useEffect)(function(){null!=c&&c.data&&g(c.data)},[c]),Object(Z.useEffect)(function(){null!=G&&G.result&&D(G.result)},[G]),[{title:"Raised By",dataIndex:"created_by",render:function(e){return $.a.createElement("h2",null,null==e?void 0:e.full_name,$.a.createElement("span",null,null==e?void 0:e.user_id))}},{title:"Type",dataIndex:"type",render:function(e){return $.a.createElement("h2",null,e)}},{title:"Uploaded at",dataIndex:"created_at",render:function(e){return $.a.createElement("h2",null,new se.a(e).format("Do MMM, YYYY")," at"," ",new se.a(e).format("LT"))}},{title:"Success/Total Records",dataIndex:"total_records",render:function(e,t){return $.a.createElement("p",null,e&&$.a.createElement("span",null,null==t?void 0:t.success_records,"/",e," "))}},{title:"Comment",dataIndex:"comment",render:function(e){return $.a.createElement("p",null,e||"N/A")}},{title:"Status",dataIndex:"status",render:function(e){return $.a.createElement("p",null,$.a.createElement("i",{className:e==ne.c.PENDING?"fa-regular fa-dot-circle text-warning":e===ne.c.SUCCESS?"fa-regular fa-dot-circle text-success":"fa-regular fa-dot-circle text-danger"}),ne.b[e])}},{title:"Action",dataIndex:"uploaded_file",render:function(e,t){return e&&$.a.createElement(Oe.a,{selectedRecord:t})}}]);return $.a.createElement($.a.Fragment,null,$.a.createElement("div",{className:"page-wrapper"},$.a.createElement(ue.a,null,$.a.createElement("title",null,"Bulk Excel Requests"),$.a.createElement("meta",{name:"description",content:"Bulk Requests Page"})),$.a.createElement("div",{className:"content container-fluid"},f.showMessage?$.a.createElement(me.a,{message:f.message,dismiss:function(){p(function(e){return le(le({},e),{},{showMessage:!1})})},isError:f.isError}):null,$.a.createElement("div",{className:"page-header"},$.a.createElement("div",{className:"row align-items-center"},$.a.createElement("div",{className:"col"},$.a.createElement("h3",{className:"page-title"},"Bulk Upload Requests"),$.a.createElement("ul",{className:"breadcrumb"},$.a.createElement("li",{className:"breadcrumb-item active"},"Bulk Upload Requests"),$.a.createElement("li",{className:"breadcrumb-item active"},"All Requests"))),$.a.createElement("div",{className:"col-auto float-end ml-auto"},$.a.createElement("button",{className:"btn btn-primary submit-btn",onClick:function(){return u(H,"show")}},$.a.createElement("i",{className:"fa fa-plus"})," Excel Upload")))),$.a.createElement("div",{className:"row filter-row"},d.includes(te.f.REGIONAL_BULK_UPLOAD_VIEW)&&$.a.createElement("div",{className:"col-md-12 col-sm-12 col-md-3 pe-1"},$.a.createElement("div",{className:"form-group"},$.a.createElement(oe.a.Group,{options:[{label:"My Uploads",value:"my_uploads"},{label:"Regional Employee Uploads",value:"regional_employee_uploads"}],onChange:function(e){var t=e.target.value;s.current=!0,b(t),n(function(e){return le(le({},e),{},{searchFrom:t,searchField:"",searchCompany:"",searchDepartment:"",searchReportingManager:"",searchDesignation:"",searchFacility:"",searchState:"",searchCity:""})}),D([]),g([]),l([])},buttonStyle:"solid",value:v,optionType:"button",size:"large"}))),"regional_employee_uploads"==v?$.a.createElement($.a.Fragment,null,$.a.createElement("div",{className:"col-sm-12 col-md-3"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Search Employee"),$.a.createElement(J.a,{className:"form-control floating",id:"sync-fields",showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,style:{height:"50px !important"},onSearch:function(e){3<=e.length&&(e=e,l([]),B(Object(be.E)({searchText:e,accessLevel:t[te.f.REGIONAL_BULK_UPLOAD_VIEW].access_level,territories:t[te.f.REGIONAL_BULK_UPLOAD_VIEW].territories,from:"Regional"})))},placeholder:"Search with name or ID",type:"text",name:"employee",notFoundContent:q?$.a.createElement(ce.a,{size:"small"}):o.data&&0===E.length?$.a.createElement("div",{className:"text-danger p-1 text-center"},"No data found"):null,value:a.searchField?{key:a.searchField}:void 0,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchField:null==t?void 0:t.value})})}},E.map(function(e,t){return $.a.createElement(J.a.Option,{key:t,value:null==e?void 0:e.employee_id},(null==e?void 0:e.employee_id__full_name)+"("+(null==e?void 0:e.employee_id__user_id)+")")})))),$.a.createElement("div",{className:"col-sm-12 col-md-3"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Search Reporting Head"),$.a.createElement(J.a,{className:"form-control floating",type:"text",showSearch:!0,allowClear:!0,filterOption:!1,placeholder:"Search By Reporting Head",onSearch:function(e){3<=e.length&&(e=e,g([]),O(!0),e={searchText:e},W(Object(be.hb)(e)))},notFoundContent:K?$.a.createElement(ce.a,{size:"small"}):y&&c.data&&0===h.length?$.a.createElement("div",{className:"text-danger p-1 text-center"},"No data found"):null,value:(null==a?void 0:a.searchReportingManager)||void 0,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchReportingManager:t,pageNumber:1})})}},null==h?void 0:h.map(function(e,t){return $.a.createElement(J.a.Option,{key:t,value:e.employee_id},e.full_name,"(",e.user_id,")")})))),$.a.createElement("div",{className:"col-sm-6 col-md-3 mb-4"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Select Company"),$.a.createElement(J.a,{className:"form-control floating",placeholder:"Select Company",allowClear:!0,showSearch:!0,value:a.searchCompany||void 0,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchCompany:t,searchDepartment:"",searchDesignation:"",pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},null==N?void 0:N.map(function(e){return $.a.createElement(J.a.Option,{key:e.id,value:e.id,label:e.short_name},e.short_name)})))),$.a.createElement("div",{className:"col-sm-6 col-md-3 "},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Select Department"),$.a.createElement(J.a,{className:"form-control floating",placeholder:"Select Department",allowClear:!0,showSearch:!0,disabled:!a.searchCompany,value:a.searchDepartment||void 0,onChange:function(a){s.current=!0,n(function(e){return le(le({},e),{},{searchDepartment:a,pageNumber:1})}),a?null!=w&&w.map(function(e){var t;(null==e||null===(t=e.mapping_department)||void 0===t?void 0:t.id)==a&&C(null==e?void 0:e.mapping_department_designation)}):C([])},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},null==w?void 0:w.map(function(e,t){return $.a.createElement(J.a.Option,{key:t,value:e.mapping_department.id,label:e.mapping_department.value},e.mapping_department.value)})))),$.a.createElement("div",{className:"col-sm-6 col-md-3"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Select Designation"),$.a.createElement(J.a,{className:" form-control floating",placeholder:"Select Designation",allowClear:!0,showSearch:!0,disabled:!a.searchDepartment,value:a.searchDesignation||void 0,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchDesignation:t,pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},null==j?void 0:j.map(function(e,t){var a,n,l;return $.a.createElement(J.a.Option,{key:t,value:null==e||null===(a=e.mapping_designation)||void 0===a?void 0:a.id,label:null==e||null===(n=e.mapping_designation)||void 0===n?void 0:n.value},null==e||null===(l=e.mapping_designation)||void 0===l?void 0:l.value)})))),$.a.createElement("div",{className:"col-sm-12 col-md-3"},$.a.createElement(ye.a,{filter:a,setFilter:n,doFetchData:s,accessPermission:te.f.REGIONAL_EMPLOYEES_VIEW})),$.a.createElement("div",{className:"col-sm-6 col-md-3"},$.a.createElement("label",{className:"date-label"},"Select State"),$.a.createElement("div",{className:"form-group"},$.a.createElement(J.a,{className:"form-control floating",placeholder:"Select State",allowClear:!0,showSearch:!0,value:a.searchState||void 0,onChange:function(t){s.current=!0,L(""===t?[]:I[T[t]]),n(function(e){return le(le({},e),{},{searchState:t,pageNumber:1,searchCity:""})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},null==P?void 0:P.map(function(e){return $.a.createElement(J.a.Option,{key:null==e?void 0:e.id,value:null==e?void 0:e.id,label:null==e?void 0:e.name},null==e?void 0:e.name)})))),$.a.createElement("div",{className:"col-sm-6 col-md-3"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Select City"),$.a.createElement(J.a,{className:"form-control floating",placeholder:"Select City",showSearch:!0,allowClear:!0,value:a.searchCity||void 0,disabled:!a.searchState,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchCity:t,pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},null==R?void 0:R.map(function(e){return $.a.createElement(J.a.Option,{key:null==e?void 0:e.id,value:null==e?void 0:e.id,label:null==e?void 0:e.name},null==e?void 0:e.name)}))))):null,$.a.createElement("div",{className:"col-sm-6 col-md-3"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Select Upload Type"),$.a.createElement(J.a,{allowClear:!0,showSearch:!0,className:"form-control floating",placeholder:"Select Upload Type",maxTagCount:"responsive",value:a.searchType||null,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchType:t,pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},ne.a.map(function(e,t){return d.includes(null==e?void 0:e.permission)&&$.a.createElement(J.a.Option,{key:t,value:null==e?void 0:e.value,label:null==e?void 0:e.name},null==e?void 0:e.name)})))),$.a.createElement("div",{className:"col-sm-6 col-md-3"},$.a.createElement("div",{className:"form-group"},$.a.createElement("label",{className:"date-label"},"Select Status"),$.a.createElement(J.a,{allowClear:!0,showSearch:!0,className:"form-control floating",placeholder:"Select Status",maxTagCount:"responsive",value:a.searchStatus||null,onChange:function(t){s.current=!0,n(function(e){return le(le({},e),{},{searchStatus:t,pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().startsWith(e.toLowerCase())}},Object.keys(ne.c).map(function(e,t){return $.a.createElement(J.a.Option,{key:t,value:ne.c[e],label:e},e)})))),$.a.createElement("div",{className:"col-sm-3 col-md-2"},$.a.createElement("label",{className:"date-label"},"Â "),$.a.createElement("div",{className:"form-group form-focus"},$.a.createElement("a",{className:"btn btn-danger btn-block w-100 px-1 py-2",style:{minHeight:"0px"},onClick:function(){s.current=!0,n(function(e){return le(le({},e),{},{searchType:"",searchStatus:"",searchField:"",searchCompany:"",searchDepartment:"",searchReportingManager:"",searchDesignation:"",searchFacility:"",searchState:"",searchCity:"",pageNumber:1})}),l([]),g([]),D([])}},"Reset")))),$.a.createElement("div",{className:"row"},$.a.createElement("div",{className:"col-md-12"},$.a.createElement("div",{className:"table-responsive"},k?$.a.createElement(fe.a,null):$.a.createElement(ie.a,{className:"table-striped",pagination:{total:null==U?void 0:U.count,current:a.pageNumber,pageSize:a.numberOfItems,onChange:function(t,e){s.current=!0,n(function(e){return le(le({},e),{},{pageNumber:t})})},showTotal:function(e,t){return"Showing ".concat(t[0]," to ").concat(t[1]," of ").concat(e," records")},showSizeChanger:!0,onShowSizeChange:function(e,t){s.current=!0,n(function(e){return le(le({},e),{},{pageNumber:1,numberOfItems:t})})},itemRender:he.a,loading:k},style:{overflowX:"auto"},columns:Q,dataSource:null==U?void 0:U.data,rowKey:function(e){return e.id}})))))),$.a.createElement(de.a,{compId:"bulk_upload",submitData:V,responseData:i,dismissError:e,error:Y,loading:z,closeModal:function(){return u(H,"hide")}}))}}.call(this,a(234))},1129:function(r,e,t){"use strict";var a=t(29),m=t.n(a),a=t(54),d=t.n(a),f=t(0),p=t.n(f),a=t(7),a=t.n(a),v=t(235),n=t(586),b=t.n(n),E=t(840),h=t(775),n=t(8),g=t.n(n);function l(e){var t=e.selectedRecord,e=Object(f.useState)(!1),e=d()(e,2),a=e[0],n=e[1],e=Object(v.a)(),e=d()(e,4),l=e[0],r=e[1],o=e[2],c=e[3],i=Object(f.useRef)(l),s=Object(f.useRef)(r),u=(Object(f.useEffect)(function(){var e;i.current!=l&&("object"==m()(l)&&o?(e=u(),b()(l,e)):"Failure"==(null==l?void 0:l.result)&&n(!0)),s.current!=r&&n(!0),i.current=l,s.current=r},[l,r]),function(){var e=null==t||null===(e=t.uploaded_file_name)||void 0===e?void 0:e.split("."),e="."+e[e.length-1];return Object(h.l)(null==t?void 0:t.type)+"-"+new g.a(null==t?void 0:t.created_at).format("YYYY-MM-DD-HH-mm-ss")+e});return p.a.createElement("div",{className:"text-center"},a?p.a.createElement("div",{className:"row mx-0 text-danger"},p.a.createElement("div",{className:"col p-0 align-self-center"},"Error occurred!"),p.a.createElement("div",{className:"col p-0 align-self-center"},p.a.createElement("button",{className:"btn btn-danger text-light btn-sm m-l-5",onClick:function(){n(!1)}},p.a.createElement("i",{className:"fa-solid fa-xmark"})))):p.a.createElement("button",{className:"btn btn-warning text-light btn-sm m-r-5",onClick:function(){var e;e=null==t?void 0:t.uploaded_file,c(Object(E.c)({id:e}))},disabled:o},p.a.createElement("i",{className:"fa-solid fa-download m-r-5"}),"Download"))}l.propTypes={selectedRecord:a.a.object},e.a=l},771:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(){return l.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"10rem"}},l.a.createElement("div",{className:"spinner-border text-primary",style:{height:"5rem",width:"5rem"},role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading...")))}},773:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return r});var t=a(0),n=a.n(t);function l(e,t,a){return"prev"===t?n.a.createElement("a",null,"Previous"):"next"===t?n.a.createElement("a",null,"Next"):a}function r(e,t){}},775:function(u,e,t){"use strict";t.d(e,"c",function(){return n}),t.d(e,"d",function(){return l}),t.d(e,"b",function(){return r}),t.d(e,"l",function(){return o}),t.d(e,"k",function(){return c}),t.d(e,"j",function(){return i}),t.d(e,"h",function(){return s}),t.d(e,"f",function(){return m}),t.d(e,"g",function(){return d}),t.d(e,"e",function(){return f}),t.d(e,"a",function(){return p}),t.d(e,"i",function(){return v});var e=t(8),a=t.n(e),n=function(n,l,r){return new Promise(function(a,e){var t;!(n instanceof File||"number"==typeof n)||"number"==typeof n?a(!0):((t=new FileReader).readAsDataURL(n),t.onload=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){(null==t?void 0:t.width)<=l&&(null==t?void 0:t.height)<=r?a(!0):a(!1)}})})},l=function(e,t){return"number"==typeof e||(!e||(null==e?void 0:e.size)<1e3*t)},r=function(e,t){return"number"==typeof e||(!e||t.includes(null==e?void 0:e.type))},o=function(e){return e&&(null==e?void 0:e.replace(/^[a-z]|([\s-_][a-z])/gi,function(e){var t,a;return null==e||null===(t=e.toUpperCase())||void 0===t||null===(a=t.replace("-"," "))||void 0===a?void 0:a.replace("_"," ")}))},c=function(e,a){return null==e?void 0:e.reduce(function(e,t){return(e[t[a][a]]=e[t[a][a]]||[]).push(t),e},{})},i=function(e,a){return null==e?void 0:e.reduce(function(e,t){return(e[t[a]]=e[t[a][a]]||[]).push(t),e},{})},s=function(e,t){return e+"-"+(new a.a).format("YYYY-MM-DD-HH-mm-ss")+"."+t},m=function(e){var t=Math.floor(e/3600),a=Math.floor((e-3600*t)/60),e=e-3600*t-60*a,n="";return 0<t&&(n+=t+"h "),0<a&&(n+=a+"m "),0<e&&(n+=e+"s "),n},d=function(e){return{employee_id:null==e?void 0:e.employee_id,employee_id__full_name:null==e?void 0:e.full_name,employee_id__user_id:null==e?void 0:e.user_id}},f=function(e,t){return e.length===t.length&&e.every(function(a){return t.some(function(t){return Object.keys(a).every(function(e){return a[e]===t[e]})})})},p=function(e){return null==e?void 0:e.toLowerCase().replace(/\b\w/g,function(e){return null==e?void 0:e.toUpperCase()})},v=function(e,a){return null==e?void 0:e.reduce(function(e,t){return e[t[a]]=t,e},{})}},794:function(r,e,t){"use strict";var a=t(4),n=t.n(a),a=t(54),b=t.n(a),E=t(0),h=t.n(E),O=t(235),g=t(153),N=t(190),_=(t(772),t(783));function l(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){n()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}e.a=function(e){function t(){u(window.innerWidth)}var a,n=e.filter,l=e.setFilter,r=e.doFetchData,o=e.accessPermission,e=Object(E.useState)(window.innerWidth),e=b()(e,2),c=e[0],u=e[1],e=Object(E.useState)([]),e=b()(e,2),m=e[0],i=e[1],d=(Object(E.useEffect)(function(){return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}},[]),c<=769),e=Object(E.useState)(null),c=b()(e,2),f=c[0],p=c[1],e=Object(O.a)(),c=b()(e,5),s=c[0],e=(c[1],c[2]),v=c[3];c[4],Object(E.useEffect)(function(){null!=s&&s.result&&i(null==s?void 0:s.result)},[s]);return h.a.createElement("div",{className:"form-group"},h.a.createElement("label",{className:"date-label"},"Work Location"),h.a.createElement(g.a,{className:"form-control floating",id:"sync-fields",showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,style:{height:"50px !important"},onSearch:function(e){var t;3<=e.length&&(t=e,clearTimeout(f),e=setTimeout(function(){i([]);var e={searchText:t,searchState:null==n?void 0:n.searchState,searchCity:null==n?void 0:n.searchCity,accessPermission:o||null};v(Object(_.w)(e))},500),p(e))},placeholder:"Search By Work Location",type:"text",notFoundContent:e?h.a.createElement(N.a,{size:"small"}):0===(null==s||null===(a=s.result)||void 0===a?void 0:a.length)?h.a.createElement("div",{className:"text-danger p-1 text-center"},"No data found"):null,value:null!=n&&n.facilityId?{key:null==n?void 0:n.facilityId}:void 0,onChange:function(t){r.current=!0,l(d?function(e){return y(y({},e),{},{facilityId:null==t?void 0:t.value,facilityIdName:null==t?void 0:t.label})}:function(e){return y(y({},e),{},{facilityId:null==t?void 0:t.value})})}},m.map(function(e,t){return h.a.createElement(g.a.Option,{key:t,value:null==e?void 0:e.id},(null==e?void 0:e.facility_id)+"("+e.facility_name+")")})))}},840:function(s,e,t){"use strict";t.d(e,"d",function(){return r}),t.d(e,"b",function(){return o}),t.d(e,"a",function(){return c}),t.d(e,"c",function(){return i});var e=t(238),a=t(237),n=t(103),l=new e.a(a.a),r=function(e){return l.get(n.a.GET_BULK_UPLOAD_RECORDS,e)},o=function(e){return l.multiPartFormData(n.a.EXCEL_BULK_UPLOAD,e)},c=function(e){return l.fileDownload(n.a.BULK_UPLOAD_SAMPLE_FILE,e)},i=function(e){return l.fileDownload(n.a.EXCEL_FILE_DOWNLOAD,e)}},858:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return r}),a.d(t,"d",function(){return o});var t=a(777),n=[{name:"Transfer Requests",permission:t.f.BULK_TRANSFER_REQUEST,value:"transfer"},{name:"State or Company Transfer Requests",permission:t.f.BULK_TRANSFER_REQUEST,value:"state_or_company_transfer"},{name:"Onboard Requests",permission:t.f.BULK_ONBOARD_REQUEST,value:"onboard"},{name:"Employee Edit Requests",permission:t.f.BULK_EMPLOYEE_EDIT_REQUEST,value:"employee_edit"},{name:"Roster Requests",permission:t.c.BULK_ROASTER_REQUEST,value:"roster"},{name:"Apprentice To Regular Request",permission:t.f.BULK_APPRENTICE_TO_REGULAR_REQUEST,value:"apprentice_to_regular"}],l={P:"PENDING",S:"SUCCESS",F:"FAILED"},r={PENDING:"P",SUCCESS:"S",FAILED:"F"},o=["transfer","employee_edit","state_or_company_transfer","onboard","apprentice_to_regular","roster"]},869:function(e,r,o){"use strict";!function(x){var e=o(4),n=o.n(e),e=o(29),T=o.n(e),e=o(239),F=o.n(e),e=o(54),w=o.n(e),e=o(50),S=o.n(e),j=o(0),C=o.n(j),I=o(585),U=o(769),e=o(7),e=o.n(e),k=o(235),t=o(586),D=o.n(t),t=(o(770),o(588)),R=o(858),L=o(153),A=o(840),M=o(155),q=o(62);function l(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach(function(e){n()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function a(e){var t,a=e.responseData,n=e.error,m=e.loading,i=e.submitData,d=(e.dismissError,e.closeModal),f=e.compId,p=(e.requestedFrom,Object.keys(Object(q.c)(M.h)||{})),e=Object(j.useState)(!1),v=(e=w()(e,2))[0],b=e[1],s=Object(j.useRef)(null),l=Object(j.useRef)(),e=Object(j.useState)({showMessage:!1,message:null}),E=(e=w()(e,2))[0],r=e[1],e=Object(k.a)(),o=(e=w()(e,5))[0],c=e[1],h=(e[2],e[3]),g=(e[4],Object(j.useRef)(n)),e=(Object(j.useRef)(n),Object(j.useState)({file:null,requestType:"",comment:""})),y=(e=w()(e,2))[0],O=e[1],e=Object(j.useState)(),u=(e=w()(e,2))[0],N=e[1],_=(x("#bulk_upload").on("show.bs.modal",function(e){var t;r({showMessage:!1,message:null}),O({file:null,requestType:"",comment:""}),(s.current.value=null)!==(t=l.current)&&void 0!==t&&t.resetForm()}),function(){var e=F()(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),h(Object(A.a)({requestType:u}));case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}());return Object(j.useEffect)(function(){"object"==T()(o)&&v&&(R.d.includes(u)?D()(o,u+"_sample.xlsx"):D()(o,u+"_sample.xls"),b(!1))},[o]),Object(j.useEffect)(function(){var e;null!==(e=l.current)&&void 0!==e&&e.resetForm(),"Success"==((s.current.value=null)==a?void 0:a.result)?d():"Failure"==(null==a?void 0:a.result)&&r(function(e){return P(P({},e),{},{showMessage:!0,message:null==a?void 0:a.message})})},[a]),Object(j.useEffect)(function(){var e;null!==(e=l.current)&&void 0!==e&&e.resetForm(),g.current!==n&&r(function(e){var t;return P(P({},e),{},{showMessage:!0,message:(null==n||null===(t=n.response)||void 0===t?void 0:t.data)||(null==n?void 0:n.message)})}),null!==(e=l.current)&&void 0!==e&&e.setSubmitting(!1),s.current.value=null},[n]),Object(j.useEffect)(function(){var e;500==(null==c||null===(e=c.response)||void 0===e?void 0:e.status)&&r(function(e){return P(P({},e),{},{showMessage:!0,message:"Unable to download please try later"})})},[c]),C.a.createElement(C.a.Fragment,null,C.a.createElement("div",{id:f,className:"modal custom-modal fade ",role:"dialog"},C.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-lg",role:"document"},C.a.createElement("div",{className:"modal-content "},C.a.createElement("div",{className:"modal-header"},C.a.createElement("h5",{className:"modal-title"}," Excel Upload"),C.a.createElement("button",{type:"button",className:"close",onClick:function(){d()},"aria-label":"Close"},C.a.createElement("span",{"aria-hidden":"true"},"X"))),C.a.createElement("div",{className:"modal-body",style:{whiteSpace:"pre-line",overflowWrap:"break-word",wordWrap:"break-word",hyphens:"auto"}},E.showMessage?C.a.createElement(U.a,{message:(null==n||null===(t=n.response)||void 0===t?void 0:t.data)||(null==n?void 0:n.message)||E.message,dismiss:function(){r(function(e){return P(P({},e),{},{showMessage:!1})})},isError:!0}):null,C.a.createElement(I.c,{initialValues:y,validationSchema:B,enableReinitialize:!0,innerRef:l,onSubmit:function(e,t){var a=t.setSubmitting;setTimeout(function(){i(Object(A.b)(e)),a(!1),O({file:null})},400)}},function(e){var t=e.values,a=e.errors,n=e.touched,l=e.handleChange,r=e.handleBlur,o=e.handleSubmit,c=e.isSubmitting,i=(e.handleClick,e.setFieldValue),e=e.isValid;return C.a.createElement("form",{onSubmit:o},C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:"col-md-6"},C.a.createElement("div",{className:"form-group ".concat(a.requestType&&n.requestType?"error-group":"")},C.a.createElement("label",{className:"col-form-label"},"Select Request Type",C.a.createElement("span",{className:"text-danger"},"*")),C.a.createElement("div",{className:"form-group form-focus"},C.a.createElement(L.a,{className:"form-select py-2",placeholder:"Filter",style:{height:"44px"},maxTagCount:"responsive",value:null==t?void 0:t.requestType,name:"requestType",onChange:function(e){i("requestType",e),N(e)},onBlur:r},C.a.createElement(L.a.Option,{value:""},"Select Request Type"),R.a.map(function(e,t){return p.includes(null==e?void 0:e.permission)&&C.a.createElement(L.a.Option,{key:t,value:null==e?void 0:e.value},null==e?void 0:e.name)})),a.requestType?C.a.createElement("small",null,null==a?void 0:a.requestType):null))),C.a.createElement("div",{className:"col-md-6"},C.a.createElement("div",{className:"form-group ".concat(a.comment&&n.comment?"error-group":"")},C.a.createElement("label",{className:"col-form-label"},"Comment"),C.a.createElement("textarea",{className:"form-control ".concat(a.comment&&n.comment?"error-input":""),type:"text",name:"comment",placeholder:"Comment",value:t.comment,onChange:l,onBlur:r}," "),a.comment&&n.comment?C.a.createElement("small",null,null==a?void 0:a.comment):null)),C.a.createElement("div",{className:"col-md-6"},C.a.createElement("div",{className:"form-group ".concat(a.file&&n.file?"error-group":"")},C.a.createElement("label",{className:"col-form-label"},"Select File",C.a.createElement("span",{className:"text-danger"},"*")),C.a.createElement("input",{className:"form-control  ".concat(a.file&&n.file?"error-input":""),type:"file",accept:".xls, .xlsx",ref:s,name:"file",placeholder:"choose the file",onChange:function(e){i("file",e.target.files[0])},onBlur:r}),a.file&&n.file?C.a.createElement("small",null,null==a?void 0:a.file):null))),u&&C.a.createElement("div",{className:"row"},C.a.createElement("div",{className:"col-md-6"},C.a.createElement("a",{className:"",onClick:function(){_()}},C.a.createElement("i",{className:"fa fa-download",style:{color:"#188ff0"}}),"Download Sample Excel"))),C.a.createElement("div",{className:"submit-section"},C.a.createElement("button",{className:"btn btn-primary submit-btn",disabled:c||!e,type:"submit"},m?C.a.createElement("span",{className:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"}):"Submit")))}))))))}var B=t.g().shape({file:t.e().required("File is required"),requestType:t.e().required("Request Type is required")});(r.a=a).propTypes={responseData:e.a.oneOfType([e.a.array,e.a.object]),error:e.a.oneOfType([e.a.string,e.a.object]),loading:e.a.bool,submitData:e.a.func,dismissError:e.a.func,closeModal:e.a.func,compId:e.a.string}}.call(this,o(234))}}]);