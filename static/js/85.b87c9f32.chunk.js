(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{1006:function(n,e,t){"use strict";t.r(e);var a=t(4),l=t.n(a),a=t(29),C=t.n(a),a=t(54),S=t.n(a),D=t(0),M=t.n(D),F=t(584),T=(t(771),t(755)),H=t(772),J=t(770),a=t(8),P=t.n(a),R=t(235),z=t(768),A=t(153),L=t(190),Y=t(769),a=t(586),X=t.n(a),B=t(236),K=t(62);function r(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function k(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach(function(e){l()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}e.default=function(){var e=Object(D.useState)({employeeId:"",pageNumber:1,numberOfItems:20}),e=S()(e,2),n=e[0],l=e[1],e=Object(D.useState)({showMessage:!1,isError:!0,message:""}),e=S()(e,2),t=e[0],r=e[1],e=Object(R.a)(),e=S()(e,4),a=e[0],c=e[1],u=e[2],m=e[3],e=Object(D.useState)(!1),e=S()(e,2),d=e[0],f=e[1],p=Object(K.c)(B.B),o=Object(D.useRef)(!1),b=Object(D.useRef)(c),e=Object(D.useState)(),e=S()(e,2),E=e[0],v=e[1],e=Object(D.useState)(0),e=S()(e,2),g=(e[0],e[1]),e=Object(D.useState)(!1),e=S()(e,2),y=e[0],O=e[1],e=(Object(D.useEffect)(function(){a.download_limit&&g(a.download_limit),a.data&&O(!0)},[a]),Object(D.useEffect)(function(){o.current&&(g(0),m(Object(Y.X)(n)),o.current=!1)},[n]),Object(R.a)()),e=S()(e,5),N=e[0],s=e[1],h=(e[2],e[3]),e=(e[4],Object(D.useEffect)(function(){"object"==C()(N)&&d&&(X()(N,"EmployeeJobHistoryData.xls"),f(!1))},[N]),Object(D.useEffect)(function(){d&&(f(!1),r({showMessage:!0,isError:!0,message:"Unable to download please try later"}))},[s]),Object(D.useEffect)(function(){var e,t,a;(null==b?void 0:b.current)!==c&&r({showMessage:!0,isError:!0,message:(null==c||null===(e=c.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||(null==c||null===(a=c.response)||void 0===a?void 0:a.data)||(null==c?void 0:c.message)}),l(function(e){return k(k({},e),{},{pageNumber:1})}),b.current=c},[c]),Object(D.useEffect)(function(){"Failure"==(null==a?void 0:a.result)&&r({showMessage:!0,isError:!0,message:(null==a?void 0:a.message)||a}),l(function(e){return k(k({},e),{},{pageNumber:1})})},[a]),Object(R.a)()),s=S()(e,4),i=s[0],e=(s[1],s[2]),j=s[3],s=Object(D.useState)([]),s=S()(s,2),w=s[0],x=s[1],s=Object(D.useState)(null),s=S()(s,2),_=s[0],I=s[1],s=(Object(D.useEffect)(function(){null!=i&&i.data&&x(i.data)},[i]),Object(D.useEffect)(function(){null!=n&&n.employeeId&&v("")},[n]),[{title:"Employee",dataIndex:"employee",render:function(e){return M.a.createElement("h2",null,M.a.createElement("div",null,null==e?void 0:e.full_name),M.a.createElement("span",null,null==e?void 0:e.user_id))}},{title:"Employment Level",dataIndex:"employment_level",render:function(e){return M.a.createElement("h2",null,p[e])}},{title:"Designation",dataIndex:["designation","value"],render:function(e,t){var a;return M.a.createElement("h2",null,M.a.createElement("div",null,e),M.a.createElement("span",null,null==t||null===(a=t.sub_company)||void 0===a?void 0:a.short_name))}},{title:"Facility",dataIndex:["location","facility_name"]},{title:"Department",dataIndex:["department","value"]},{title:"Reporting Head",dataIndex:"reporting_manager",render:function(e,t){var a,n;return M.a.createElement("h2",null,M.a.createElement("div",null,(null==t||null===(a=t.reporting_manager)||void 0===a?void 0:a.full_name)||"N/A"),M.a.createElement("span",null,(null==t||null===(n=t.reporting_manager)||void 0===n?void 0:n.user_id)||""))}},{title:"From Date",dataIndex:"effective_from",render:function(e){return M.a.createElement("div",null,e?P()(new Date(e)).format("Do MMM, YYYY"):"N/A")}},{title:"To Date",dataIndex:"effective_till",render:function(e){return M.a.createElement("div",null,e?P()(new Date(e)).format("Do MMM, YYYY"):"N/A")}}]);return M.a.createElement(M.a.Fragment,null,M.a.createElement("div",{className:"page-wrapper"},M.a.createElement(F.a,null,M.a.createElement("title",null,"Employee Reports"),M.a.createElement("meta",{name:"description",content:"Login page"})),M.a.createElement("div",{className:"content container-fluid"},t.showMessage?M.a.createElement(z.a,{message:t.message,dismiss:function(){r(function(e){return k(k({},e),{},{showMessage:!1})})},isError:t.isError}):null,M.a.createElement("div",{className:"page-header"},M.a.createElement("div",{className:"row align-items-center"},M.a.createElement("div",{className:"col"},M.a.createElement("h3",{className:"page-title"},"Employee Job History Report"),M.a.createElement("ul",{className:"breadcrumb"},M.a.createElement("li",{className:"breadcrumb-item active"},"Employee"),M.a.createElement("li",{className:"breadcrumb-item active"},"Employee Reports"),M.a.createElement("li",{className:"breadcrumb-item active"},"Job History Report"))),M.a.createElement("div",{className:"col-auto float-end ml-auto"},M.a.createElement("button",{className:"btn btn-primary submit-btn",onClick:function(){f(!0),h(Object(Y.nb)(n))},disabled:!y},d?M.a.createElement("span",{className:"spinner-border spinner-border-lg",role:"status","aria-hidden":"true"}):M.a.createElement(M.a.Fragment,null,M.a.createElement("i",{className:"fa fa-plus"})," Download Excel"," "))))),M.a.createElement("div",{className:"row filter-row"},M.a.createElement("div",{className:"col-sm-6 col-md-5"},M.a.createElement("div",{className:"form-group"},M.a.createElement("label",{className:"date-label"},"Select Employee"),M.a.createElement(A.a,{className:"form-control floating",showSearch:!0,allowClear:!0,filterOption:!1,onSearch:function(e){var t;3<=e.length&&(t=e,clearTimeout(_),e=setTimeout(function(){x([]);var e={searchText:t};j(Object(Y.hb)(e))},500),I(e))},placeholder:"Search Employee with ID,Name",type:"text",notFoundContent:e?M.a.createElement(L.a,{size:"small"}):i.data&&0===w.length?M.a.createElement("div",{className:"text-danger p-1 text-center"},"No data found"):null,value:null!=n&&n.employeeId?null==n?void 0:n.employeeId:null,onChange:function(t){O(!1),o.current=!0,l(function(e){return k(k({},e),{},{employeeId:t,pageNumber:1})})}},null==w?void 0:w.map(function(e,t){return M.a.createElement(A.a.Option,{key:t,value:e.user_id,style:{height:"42px",marginTop:"10px"}},e.full_name,"(",e.user_id,")")})),!!E&&M.a.createElement("small",{className:"text-danger ms-2"},"* ",E," "))),M.a.createElement("div",{className:"col-sm-3 col-md-2"},M.a.createElement("label",{className:"date-label"},"Â "),M.a.createElement("div",{className:"form-group form-focus"},M.a.createElement("a",{className:"btn btn-danger btn-block w-100 px-1 py-2",style:{minHeight:"0px"},type:"button",onClick:function(){o.current=!0,l(function(e){return k(k({},e),{},{employeeId:"",pageNumber:1})}),x([])}},"Reset"))),M.a.createElement("div",{className:"row"},M.a.createElement("div",{className:"col-md-12"},M.a.createElement("div",{className:"table-responsive"},u?M.a.createElement(J.a,null):M.a.createElement(T.a,{className:"table-striped",pagination:{total:null==a?void 0:a.total_no_of_objs,current:n.pageNumber,pageSize:n.numberOfItems,onChange:function(t,a){l(function(e){return k(k({},e),{},{pageNumber:a!=n.numberOfItems?1:t,numberOfItems:a})})},showTotal:function(e,t){return"Showing ".concat(t[0]," to ").concat(t[1]," of ").concat(e," records")},showSizeChanger:!0,itemRender:H.a,loading:u},style:{overflowX:"auto"},columns:s,dataSource:null==a?void 0:a.data,rowKey:function(e){return null==e?void 0:e.employee_job_id},scroll:"scroll"}))))))))}},770:function(e,t,a){"use strict";var n=a(0),l=a.n(n);t.a=function(){return l.a.createElement("div",{className:"d-flex justify-content-center align-items-center",style:{height:"10rem"}},l.a.createElement("div",{className:"spinner-border text-primary",style:{height:"5rem",width:"5rem"},role:"status"},l.a.createElement("span",{className:"visually-hidden"},"Loading...")))}},772:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return r});var t=a(0),n=a.n(t);function l(e,t,a){return"prev"===t?n.a.createElement("a",null,"Previous"):"next"===t?n.a.createElement("a",null,"Next"):a}function r(e,t){}}}]);