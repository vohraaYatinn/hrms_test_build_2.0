(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1015:function(e,t,a){"use strict";a.r(t),function(ce){var e=a(31),oe=a.n(e),e=a(4),$=a.n(e),e=a(83),ie=a.n(e),e=a(46),Q=a.n(e),se=a(353),ue=a(759),Z=a(156),me=a(772),de=a(764),e=a(8),fe=a.n(e),ee=a(0),te=a.n(ee),pe=a(595),Ee=a(777),be=a(878),ve=a(779),ae=a(158),ge=(a(356),a(781)),ne=a(247),e=(a(788),a(597)),he=a.n(e),ye=a(780),_e=a(785),Ne=a(778),le=a(65),Oe=a(125),je=a(782),we=a(806),xe=a(783),Se=a(799),Ie=a(792),Ce=a(797),ke=a(784);function n(t,e){var a,n=Object.keys(t);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(t),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)),n}function re(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach(function(e){$()(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function Pe(e,t){var a,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),a=0,{s:t=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,l=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw l}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}t.default=function(){function u(e,t){ce(e).modal(t)}function m(){var e={reportType:Ie.l.EMPLOYEE_EXCEPTION_REPORT};g(Object(Ce.c)(e)),u(q,"show")}var e=Object(ae.a)(),e=Q()(e,4),t=e[0],n=e[1],d=e[2],f=e[3],e=Object(ae.a)(),e=Q()(e,4),a=e[0],p=e[3],e=Object(ae.a)(),e=Q()(e,4),E=e[0],b=e[1],v=e[2],g=e[3],e=Object(ae.a)(),e=Q()(e,5),l=e[0],h=e[1],y=e[2],_=e[3],N=Object(le.c)(Oe.g),O=Object(le.c)(ne.K),e=Object(ee.useState)([]),e=Q()(e,2),j=e[0],w=e[1],e=Object(ee.useState)([]),e=Q()(e,2),x=e[0],S=e[1],I=Object(le.c)(ne.B),e=Object(ee.useState)(""),e=Q()(e,2),C=e[0],k=e[1],P=Object(le.c)(ne.C),e=Object(ee.useState)([]),e=Q()(e,2),D=e[0],F=e[1],e=Object(ee.useState)({reportType:"unavailable",aadharNumber:!1,aadharFile:!1,panNumber:!1,panFile:!1,educationDetails:!1,employmentHistory:!1,nomineeDetails:!1,bankDetails:!1,profilePhoto:!1,searchState:"",companyId:"",departmentId:"",facilityId:"",pageNumber:1,numberOfItems:20}),e=Q()(e,2),r=e[0],c=e[1],e=Object(ae.a)(),e=Q()(e,5),R=e[0],L=e[3],e=Object(ae.a)(),e=Q()(e,5),o=e[0],e=(e[3],Object(ee.useState)({showMessage:!1,isError:!0,message:""})),e=Q()(e,2),M=e[0],i=e[1],A=Object(le.c)(ne.E),e=Object(ee.useState)([]),e=Q()(e,2),T=e[0],Y=e[1],e=Object(ee.useState)([]),e=Q()(e,2),H=(e[0],e[1]),e=Object(ee.useState)(0),e=Q()(e,2),U=e[0],W=e[1],X=(Object(ee.useEffect)(function(){if(0!=A.length){var e,t=Pe(A);try{for(t.s();!(e=t.n()).done;)!function(){var t=e.value;Y(function(e){return[].concat(ie()(e),[{id:t,name:O[t]}])})}()}catch(e){t.e(e)}finally{t.f()}}else{var a,n=Pe(states);try{for(n.s();!(a=n.n()).done;)!function(){var t=a.value;Y(function(e){return[].concat(ie()(e),[{id:t.id,name:t.name}])})}()}catch(e){n.e(e)}finally{n.f()}}},[A]),Object(ee.useEffect)(function(){""!=C&&z()},[C]),Object(ee.useRef)(h)),z=(Object(ee.useEffect)(function(){X.current!=h&&i(function(e){return re(re({},e),{},{showMessage:!0,message:"Unable to download please try later"})})},[h]),function(){L(Object(_e.g)({group_company_id:C}))}),e=Object(ee.useState)(null),e=Q()(e,2),s=(e[0],e[1],Object(ee.useRef)(!0)),J=Object(ee.useRef)(!1),V=Object(ee.useRef)(n),B=(Object(ee.useEffect)(function(){var e,t,a;(null==V?void 0:V.current)!==n&&i({showMessage:!0,isError:!0,message:(null==n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||(null==n||null===(a=n.response)||void 0===a?void 0:a.data)||(null==n?void 0:n.message)}),c(function(e){return re(re({},e),{},{pageNumber:1})}),V.current=n},[n]),Object(ee.useEffect)(function(){N&&k(N.job_details[0].sub_company.id)},[N]),Object(ee.useEffect)(function(){F(null==E?void 0:E.data)},[E]),Object(ee.useEffect)(function(){"Failure"==(null==t?void 0:t.result)?i({showMessage:!0,isError:!0,message:(null==t?void 0:t.message)||t}):"Success"==(null==t?void 0:t.result)&&W(null==t?void 0:t.download_limit)},[t]),Object(ee.useEffect)(function(){null!=o&&o.result&&H(o.result)},[o]),Object(ee.useEffect)(function(){p(Object(Ne.Y)())},[]),Object(ee.useEffect)(function(){var e,t;"Success"===(null==a?void 0:a.result)&&(t={},null==a||null!==(e=a.data)&&void 0!==e&&e.map(function(e){ye.M[null==e?void 0:e.document_type]&&(t=re(re({},t),{},$()({},ye.M[null==e?void 0:e.document_type],null==e?void 0:e.is_required)))}),c(function(e){return re(re({},e),t)})),"Failure"===(null==a?void 0:a.result)&&i({showMessage:!0,isError:!0,message:(null==a?void 0:a.message)||a})},[a]),Object(ee.useEffect)(function(){s.current&&(W(0),f(Object(Ne.ib)(r)),s.current=!1),J.current&&G()},[r]),Object(ee.useEffect)(function(){w((null==R?void 0:R.result)||[])},[R]),se.a.CheckableTag),K=Object(ee.useRef)(l),e=(Object(ee.useEffect)(function(){var e;console.log(l),K.current!=l&&"object"==oe()(l)&&1==(null==r?void 0:r.directDownload)&&(e=Ie.i[Ie.l.EMPLOYEE_EXCEPTION_REPORT],he()(l,Object(ke.h)(e.FILE_NAME,e.FILE_EXTENSION))),"Success"==(null==l?void 0:l.result)&&i({showMessage:!0,isError:!1,message:null==l?void 0:l.message}),K.current=l},[l]),[{title:"Employee",dataIndex:"full_name",render:function(e,t){return te.a.createElement("h2",null,te.a.createElement("div",null,e),te.a.createElement("span",null,null==t?void 0:t.user_id))}},{title:"Employee ID",dataIndex:["employee_external_code","0","external_id"],render:function(e,t){var a;return te.a.createElement("h2",null,te.a.createElement("div",null,0<t.employee_external_code.length?null==t||null===(a=t.employee_external_code[0])||void 0===a?void 0:a.external_id:"N/A"))}},{title:"Designation",dataIndex:["active_job_details","0","designation","value"],render:function(e,t){var a,n;return te.a.createElement("h2",null,te.a.createElement("div",null,e),te.a.createElement("span",null,null==t||null===(a=t.active_job_details[0])||void 0===a||null===(n=a.sub_company)||void 0===n?void 0:n.short_name))}},{title:"Work Location",dataIndex:["active_job_details","0","location","facility_id"],render:function(e){return te.a.createElement("h2",null,te.a.createElement("div",null,e))}},{title:"Roster Name",dataIndex:["employee_rosters","0","roster_pattern","roster_name"],render:function(e){return te.a.createElement("h2",null,te.a.createElement("div",null,e))}},{title:"Shift Off",dataIndex:["active_job_details","0","shift_off_type","display_name"],render:function(e){return te.a.createElement("h2",null,te.a.createElement("div",null,e))}},{title:"Joining Date",dataIndex:"joining_date",render:function(e){return te.a.createElement("div",null,e?fe()(new Date(e)).format("Do MMM, YYYY"):"N/A")}},{title:"Employment Status",dataIndex:"employment_status",render:function(e){return te.a.createElement("h2",null,P[e])}},{title:"Employment Level",dataIndex:["active_job_details","0","employment_level"],render:function(e){return te.a.createElement("h2",null,I[e])}},{title:"Department",dataIndex:["active_job_details","0","department","value"]},{title:"Reporting Head",dataIndex:"reporting_manager",render:function(e,t){var a,n;return te.a.createElement("h2",null,te.a.createElement("div",null,(null==t||null===(a=t.reporting_manager)||void 0===a?void 0:a.full_name)||"N/A"),te.a.createElement("span",null,(null==t||null===(n=t.reporting_manager)||void 0===n?void 0:n.user_id)||""))}},{title:"Files Uploaded",dataIndex:["files_count"],render:function(e,t){return te.a.createElement(ue.a,{placement:"left",content:te.a.createElement(be.a,{availableFiles:null==t?void 0:t.available_files}),trigger:"click"},te.a.createElement("a",{className:"text-decoration-underline"},e," /",Object.keys(null==t?void 0:t.available_files).length))}}]),q="#view_employee_exception_reports",G=function(){null!=r&&r.directDownload?_(Object(Ne.t)(r)):_(Object(Ne.x)(r)),J.current=!1};return te.a.createElement(te.a.Fragment,null,te.a.createElement("div",{className:"page-wrapper"},te.a.createElement(pe.a,null,te.a.createElement("title",null,"Employee Reports"),te.a.createElement("meta",{name:"description",content:"Login page"})),te.a.createElement("div",{className:"content container-fluid"},M.showMessage?te.a.createElement(Ee.a,{message:M.message,dismiss:function(){i(function(e){return re(re({},e),{},{showMessage:!1})})},isError:M.isError}):null,te.a.createElement("div",{className:"page-header"},te.a.createElement("div",{className:"row align-items-center"},te.a.createElement(xe.a,null))),te.a.createElement("div",{className:"row filter-row"},te.a.createElement("div",{className:"col-sm-6 col-md-3"},te.a.createElement("div",{className:"form-group"},te.a.createElement("label",{className:"date-label"},"Select Report Type"),te.a.createElement(Z.a,{showSearch:!0,className:" form-control floating",value:null!=r&&r.reportType?null==r?void 0:r.reportType:null,onChange:function(t){s.current=!0,c(function(e){return re(re({},e),{},{reportType:t,pageNumber:1})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().startsWith(e.toLowerCase())}},te.a.createElement(Z.a.Option,{value:"available",label:"Available"},"Available"),te.a.createElement(Z.a.Option,{value:"unavailable",label:"Unavailable"},"Unavailable")))),te.a.createElement("div",{className:"col-sm-6 col-md-3"},te.a.createElement("div",{className:"form-group"},te.a.createElement("label",{className:"date-label"},"Select Company"),te.a.createElement(Z.a,{allowClear:!0,showSearch:!0,className:"form-control floating",type:"text",name:"companyId",placeholder:"Select Company",value:r.companyId||null,onChange:function(t){s.current=!0,c(function(e){return re(re({},e),{},{companyId:t,departmentId:""})}),t?j.map(function(e){(null==e?void 0:e.id)===t&&S(null==e?void 0:e.mapping_company_department)}):S([])},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},j.map(function(e){return te.a.createElement(Z.a.Option,{key:e.id,value:e.id,label:e.short_name},e.short_name)})))),te.a.createElement("div",{className:"col-sm-6 col-md-3"},te.a.createElement("div",{className:"form-group"},te.a.createElement("label",{className:"date-label"},"Select Departments"),te.a.createElement(Z.a,{allowClear:!0,showSearch:!0,className:"form-control floating",name:"departmentId",placeholder:"Select Departments",disabled:0===x.length,value:0===x.length?[]:r.departmentId||null,onChange:function(t){s.current=!0,c(function(e){return re(re({},e),{},{departmentId:t})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().includes(e.toLowerCase())}},x.map(function(e){var t,a,n,l;return te.a.createElement(Z.a.Option,{key:null==e||null===(t=e.mapping_department)||void 0===t?void 0:t.id,value:null==e||null===(a=e.mapping_department)||void 0===a?void 0:a.id,label:null==e||null===(n=e.mapping_department)||void 0===n?void 0:n.value},null==e||null===(l=e.mapping_department)||void 0===l?void 0:l.value)})))),te.a.createElement("div",{className:"col-sm-6 col-md-3"},te.a.createElement("div",{className:"form-group"},te.a.createElement("label",{className:"date-label"},"Select State"),te.a.createElement(Z.a,{allowClear:!0,showSearch:!0,className:"form-control form-select py-2",placeholder:"Select State",value:r.searchState||null,onChange:function(t){s.current=!0,c(function(e){return re(re({},e),{},{searchState:t})})},optionFilterProp:"children",filterOption:function(e,t){return(null!==(t=null==t?void 0:t.label)&&void 0!==t?t:"").toLowerCase().startsWith(e.toLowerCase())}},null==T?void 0:T.sort(function(e,t){return(null==t?void 0:t.name)<(null==e?void 0:e.name)?1:-1}).map(function(e){return te.a.createElement(Z.a.Option,{key:e.id,value:e.id,label:e.name,className:"ant-select-custom-dropdown-option"},e.name)})))),te.a.createElement("div",{className:"col-sm-6 col-md-3"},te.a.createElement(we.a,{filter:r,setFilter:c,doFetchData:s,accessPermission:je.f.REGIONAL_EMPLOYEES_VIEW})),te.a.createElement("div",{className:"col-sm-3 col-md-2"},te.a.createElement("label",{className:"date-label"}," "),te.a.createElement("div",{className:"form-group form-focus"},te.a.createElement("a",{className:"btn btn-danger btn-block w-100 px-1 py-2",style:{minHeight:"0px"},type:"button",onClick:function(){s.current=!0,S([]),c(function(e){return re(re({},e),{},{reportType:"unavailable",aadharNumber:!1,aadharFile:!1,panNumber:!1,panFile:!1,educationDetails:!1,employmentHistory:!1,nomineeDetails:!1,bankDetails:!1,profilePhoto:!1,searchState:"",companyId:"",departmentId:"",facilityId:"",pageNumber:1})})}},"Reset"))),te.a.createElement("div",{className:"col-12"},te.a.createElement("div",{className:"form-group form-focus h-100"},te.a.createElement("label",{className:" date-label"},"Select Reports"),te.a.createElement("br",null),te.a.createElement(me.b,{size:[0,8],wrap:!0},Object.keys(ye.L).map(function(a){return te.a.createElement(B,{key:a,checked:r[a],onChange:function(t){s.current=!0,c(function(e){return re(re({},e),{},(e={},$()(e,a,t),$()(e,"pageNumber",1),e))})},className:"text-uppercase pt-2 pb-2",style:{border:"1px solid #7772dd",backgroundColor:r[a]?"#7772dd":"#fff",color:r[a]?"#fff":"#000"}},ye.L[a])}))))),te.a.createElement("div",{className:"row"},te.a.createElement("div",{className:"col-md-12"},te.a.createElement("div",{className:"table-responsive"},d?te.a.createElement(ve.a,null):te.a.createElement(de.a,{className:"table-striped",pagination:{total:null==t?void 0:t.total_no_of_objs,current:r.pageNumber,pageSize:r.numberOfItems,onChange:function(t,a){s.current=!0,c(function(e){return re(re({},e),{},{pageNumber:a!=r.numberOfItems?1:t,numberOfItems:a})})},showTotal:function(e,t){return"Showing ".concat(t[0]," to ").concat(t[1]," of ").concat(e," Employees")},showSizeChanger:!0,itemRender:ge.a,loading:d},style:{overflowX:"auto"},columns:e,dataSource:null==t?void 0:t.data,rowKey:function(e){return null==e?void 0:e.employee_id},scroll:"scroll",title:function(){return te.a.createElement("div",{className:"row"},te.a.createElement("div",{className:"col align-self-center py-2 py-sm-0"},te.a.createElement("h4",{className:"mb-0"},"Employee Profile Exception Reports")),te.a.createElement("div",{className:"col align-self-center py-2 py-sm-0"},te.a.createElement("div",{className:"text-end"},te.a.createElement("button",{className:"btn btn-primary btn-sm px-2 py-1 m-r-5",onClick:function(){m()},disabled:v},v?te.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):te.a.createElement(te.a.Fragment,null,te.a.createElement("i",{className:"fa-solid fa-file"})," View Reports")),te.a.createElement("button",{className:"btn btn-warning btn-sm text-light px-2 py-1",onClick:function(){J.current=!0,c(function(e){return re(re({},e),{},{directDownload:U>=(null==t?void 0:t.total_no_of_objs)})})},disabled:!(null!=t&&t.total_no_of_objs)&&y},y?te.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):te.a.createElement(te.a.Fragment,null,te.a.createElement("i",{className:"fa-solid fa-cloud-arrow-down"})," ","Download")))))}})))))),te.a.createElement(Se.a,{modalId:"view_employee_exception_reports",pendingReports:D,pendingReportFunction:m,pendingReportsLoading:v,pendingReportsError:b,closeModal:function(){return u(q,"hide")}}))}}.call(this,a(246))},878:function(e,t,a){"use strict";function n(e){return e=null==e?void 0:e.availableFiles,r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Attachment Names"),r.a.createElement("th",{scope:"col"},"Availability"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Profile Photo"),r.a.createElement("td",{className:"text-center"},null!=e&&e.photo_url_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Aadhar Card"),r.a.createElement("td",{className:"text-center"},null!=e&&e.aadhar_card_file_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Bank Account Proof"),r.a.createElement("td",{className:"text-center"},null!=e&&e.bank_account_proof_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Driving License"),r.a.createElement("td",{className:"text-center"},null!=e&&e.driving_license_file_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Pan Card"),r.a.createElement("td",{className:"text-center"},null!=e&&e.pan_card_file_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Voter Card"),r.a.createElement("td",{className:"text-center"},null!=e&&e.voter_card_file_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Passport"),r.a.createElement("td",{className:"text-center"},null!=e&&e.passport_file_id?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Education Certificates"),r.a.createElement("td",{className:"text-center"},null!=e&&e.education_certificates?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger "}))),r.a.createElement("tr",null,r.a.createElement("td",null,"History Files"),r.a.createElement("td",{className:"text-center"},null!=e&&e.history_files?r.a.createElement("i",{className:"fa-solid fa-check text-success"}):r.a.createElement("i",{className:"fa-solid fa-x text-danger "}))))))}var l=a(0),r=a.n(l),l=a(7),a=a.n(l);(t.a=n).propTypes={availableFiles:a.a.object}}}]);